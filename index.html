<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <!-- <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0"> -->
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>wxh5</title>
  <script src="http://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
  <script>
    const code = getUrlParam("code"),
      openId = localStorage.getItem("openId");
    if (!openId && !code) {
      alert(1)
      const appid = "wx9cb9ed7d7cc504b7",
        url = encodeURIComponent(location.href.split('#')[0]);
      location.href = 'http://open.weixin.qq.com/connect/oauth2/authorize?appid=' + appid + '&redirect_uri=' + url + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect'
    }
    //获取url中参数
    function getUrlParam(name) {
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
      var r = window.location.search.substr(1).match(reg);
      if (r != null) return decodeURI(r[2]);
      return null;
    }  
  </script>
</head>

<body>
  <div id="app-box"></div>
  <!-- built files will be auto injected -->
</body>

</html>